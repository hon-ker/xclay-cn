"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9120],{14328:function(e,t,l){l.d(t,{C8:function(){return m},D6:function(){return c},f4:function(){return d},k0:function(){return a},uF:function(){return o},ve:function(){return s}});var r=l(96486),n=l.n(r);let s=async e=>new Promise((t,l)=>{let{save:r,parentId:s,addInfo:a,editInfo:i,pushItem:c,changeItem:o,regenerateItem:d,errItem:m,setConvTree:x,conv_tree:u}=e,h=n().cloneDeep(u),g=null;g=h.length>0?function e(t,l){for(let n=0;n<t.length;n++){if(r&&!s){t.map(e=>e.selected=!1),t.push(c);break}if(t[n].id===(null==d?void 0:d.id)){t[n].children.map(e=>e.selected=!1),t[n].children.push({selected:!0,rid:d.rid,id:d.rid,model:d.model,content:[],end_at:null,mod_result:0,role:2,time:"",children:[],loading:!0}),l=d.rid;break}if(t[n].id===(null==i?void 0:i.id)&&(i.errcode&&(t[n].errcode=i.errcode),(null==i?void 0:i.resetId)&&(t[n]={...t[n],id:i.resetId,rid:i.resetId}),i.mod_result>=0&&(t[n]={...t[n],mod_result:i.mod_result})),t[n].id===(null==o?void 0:o.id)){let e=o.contentData,l=t[n].content;if(null==e?void 0:e.func_call){console.log(l,"func_call");let t=l.findIndex(t=>t.id==e.id);console.log(t,"func_call"),console.log(e,"我是要被修改的item"),console.log(l[t],"content[index]"),-1==t?l.push(e):l[t]={...l[t],...e}}if(null==e?void 0:e.textMerge){let t=l.findIndex(t=>t.id==e.id);-1===t?l.push(e):l[t]=e}let r={...t[n],...o,content:l};(null==o?void 0:o.resetId)&&(r=Object.assign(r,{id:o.resetId,rid:o.resetId})),t[n]=r;break}if(t[n].id===(null==a?void 0:a.id)&&(null==a?void 0:a.addItem)){t[n].children.map(e=>e.selected=!1),t[n].children.push(a.addItem);break}if(t[n].selected&&t[n].children.length>0)l=e(t[n].children,l);else if(t[n].selected){console.log(t[n].id,"在这最后一个数据 添加新的对话"),l=t[n].id,c&&t[n].children.push(c),m&&(t[n]={...t[n],...m});break}}return l}(h):c.children[0].id;let p=0==h.length?[c]:h;console.log(p,"setonvTreelastTree"),x(p),t({lastId:g,lastTree:p})}),a=(e,t,l)=>e.map((r,n)=>{let s=e.findIndex(e=>e.id===t);return r.id===t?{...r,selected:!1}:"prev"===l&&s>-1&&s-1==n?{...e[n],selected:!0}:"next"===l&&s>-1&&s+1==n?{...e[n],selected:!0}:r.children.length>0?{...r,children:a(r.children,t,l)}:r}),i=(e,t,l)=>e.map((e,r)=>e.id===t?{...e,show:l}:e.children.length>0?{...e,children:i(e.children,t,l)}:e),c=async e=>{console.log(e,"conv_tree");let t=n().cloneDeep(e);return function e(t,l){for(let r=0;r<t.length;r++)t[r].selected&&t[r].children.length>0?l=e(t[r].children,t[r]):t[r].selected&&0==t[r].children.length&&(l=t[r]);return l}(t)},o=async e=>{console.log(e,"conv_tree");let t=n().cloneDeep(e);return function e(t,l){for(let r=0;r<t.length;r++)t[r].selected&&t[r].children.length>0&&(l=e(t[r].children,t[r]));return l}(t)},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(let l of e){if(!0===l.selected&&void 0!==l.errcode)return t;if(l.selected&&l.children&&l.children.length>0){let e=d(l.children,l.id);if(e)return e}}return null},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(let l of e){if(!0===l.selected&&"number"==typeof l.id)return t;if(l.selected&&l.children&&l.children.length>0){let e=m(l.children,l.id);if(e)return e}}return null}},19120:function(e,t,l){l.d(t,{Z:function(){return er}});var r=l(85893),n=l(9473),s=l(67294),a=l(86892),i=l(92411),c=l(11119);let o=e=>{let{children:t,href:l}=e;return(0,r.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer",style:{color:"#0082FC",textDecoration:"underline"},children:t})},d={a:s.memo(o)},m=e=>{let{language:{browserLanguage:t}}=(0,n.v9)(e=>e),{flagged:l,block:s}=e,a=(0,r.jsx)("div",{className:"block py-2 px-3 border text-gray-600 rounded-md text-sm dark:text-gray-100 border-orange-500 bg-orange-500/10 mt-3",children:(0,r.jsx)(i.D,{components:d,children:c.LLM_WARNING_MESSAGE[t]||c.LLM_WARNING_MESSAGE.en})}),o=(0,r.jsx)("div",{className:"flagged py-2 px-3 border text-gray-600 rounded-md text-sm dark:text-gray-100 border-red-500 bg-red-500/10",children:(0,r.jsx)(i.D,{components:d,children:c.LLM_WARNING_MESSAGE[t]||c.LLM_WARNING_MESSAGE.en})});return(0,r.jsxs)(r.Fragment,{children:[l&&a,s&&o]})};var x=l(74641),u=l(93463),h=l(51446),g=l(31038);let p=e=>{let{data:t,index:l,status:n,handleClickPrev:s,handleClickNext:a}=e;return(0,r.jsx)(r.Fragment,{children:t.length>1&&(0,r.jsxs)("div",{className:"flex items-center justify-center gap-1  ml-3 group-hover:visible visible print-actions",children:[(0,r.jsx)("button",{onClick:()=>s(),style:{cursor:0===l||n?"not-allowed":"pointer"},children:(0,r.jsx)(h.Z,{className:"w-4 h-4 ".concat(0!=l?"text-gray-500 dark:text-gray-300":"text-gray-300 dark:text-gray-500")})}),(0,r.jsxs)("p",{className:"mx-1",children:[l+1,"/",t.length]}),(0,r.jsx)("button",{onClick:()=>a(),style:{cursor:l===t.length-1?"not-allowed":"pointer"},children:(0,r.jsx)(g.Z,{className:"w-4 h-4 ".concat(l!=t.length-1||n?"text-gray-500 dark:text-gray-300":"text-gray-300  dark:text-gray-500")})})]})})};var f=l(74855),v=l.n(f),j=l(86501),b=l(43709),y=l(3306),N=l(94055);let w=e=>{let{content:t}=e,l=()=>{(0,j.Am)(e=>(0,r.jsx)(b.Z,{iconCheck:!0,children:(0,r.jsx)("div",{className:"ml-3 h6",children:"Content copied"})}))},n="h-5 w-5";return(0,r.jsx)(f.CopyToClipboard,{text:t,onCopy:l,children:(0,r.jsx)(N.default,{placement:"top",title:"Copy",children:(0,r.jsx)("button",{className:n,children:(0,r.jsx)(y.Z,{className:"".concat(n," hover:text-primary-1")})})})})};var k=l(311);let _=e=>{let{onClick:t}=e,l="h-5 w-5";return(0,r.jsx)(N.default,{placement:"top",title:"Edit",children:(0,r.jsx)("button",{className:l,onClick:t,style:{marginRight:"-0.2rem"},children:(0,r.jsx)(k.Z,{className:"".concat(l," hover:text-primary-1")})})})};var C=l(41117);let S=e=>{let{title:t,onClick:l}=e,n="h-5 w-5";return(0,r.jsx)(N.default,{placement:"top",title:t,children:(0,r.jsx)("button",{className:n,onClick:l,children:(0,r.jsx)(C.Z,{className:"".concat(n," hover:text-primary-1")})})})};var Z=l(32522);let F=e=>{let{title:t,onClick:l}=e,n="h-5 w-5";return(0,r.jsx)(N.default,{placement:"top",title:t,children:(0,r.jsx)("button",{className:n,onClick:l,children:(0,r.jsx)(Z.Z,{className:"".concat(n," hover:text-primary-1")})})})};var A=l(96486),E=l.n(A),I=l(44319),D=l(37291),L=l(65880),R=l(4738);let M=e=>{let{status:t,message:l,mod_result:i,pnChildren:c,saveMessage:o}=e,{chatAboutInfo:d}=(0,n.v9)(e=>e.chat),{language:{browserLanguage:h},userInfo:{meData:g}}=(0,n.v9)(e=>e),p=(0,s.useRef)(null),{content:f,errcode:v,attachments:j}=l,[b,y]=(0,s.useState)(""),[N,k]=(0,s.useState)(""),[C,S]=(0,s.useState)(!1),{setChatEdit:Z,filesChatList:F,setFileChatList:A}=(0,s.useContext)(L.p),[M,T]=(0,s.useState)(E().cloneDeep(j)),{fileChange:z,maxSize:G,maxLength:O,filesMax:U,filesMaxSize:W}=(0,D.Z)({eQuantity:Array.isArray(M)?M.length:0,filesList:F,setFileList:A});(0,a.Z)(()=>{y(navigator.language.substring(0,2))}),(0,s.useEffect)(()=>{C&&N&&setTimeout(()=>{p.current&&p.current.setSelectionRange(N.length,N.length)},10)},[C]);let P=()=>{S(!1),Z(!1),A([])};return(0,r.jsxs)("div",{className:"max-w-[65rem] mb-4 m-auto relative",children:[(0,r.jsxs)("div",{className:"space-y-6 px-6 py-6 border-3 border-n-2 rounded-[1.25rem] md:p-5 dark:border-transparent dark:bg-n-5/50",style:{whiteSpace:"pre-line"},dir:"ar"!=h&&"fa"!=h?"":"ar"==b||"fa"==b?"rtl":"",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"relative shrink-0 w-8 h-8 rounded-lg overflow-hidden	shadow-[0_0_0_0.25rem_#FEFEFE] dark:shadow-[0_0_0_0.25rem_#232627]",children:(0,r.jsx)("img",{className:"object-cover ",src:(null==g?void 0:g.avatar_url)||"/images/hi.svg",style:{backgroundColor:(null==g?void 0:g.avatar_url)?"transparent":"#fff",inset:0,color:"transparent",height:"100%"},alt:"Avatar"})}),(0,r.jsx)("div",{className:"mr-auto"}),(0,r.jsxs)("div",{className:"flex items-center print-actions space-x-3",children:[(0,r.jsx)(w,{content:f}),"dialogue"===t&&!v&&2==d.topic.format_version&&(0,r.jsx)(_,{onClick:()=>{C||(S(!0),Z(!0),k(f))}}),c]})]}),(0,r.jsxs)("div",{className:"min-h-[20px] gap-3 flex items-start overflow-x-auto whitespace-pre-wrap break-words flex-col ".concat(1==i?"text-orange-500":""),children:[(0,r.jsxs)("div",{className:"relative flex items-center flex-wrap -mt-3",children:[Array.isArray(M)&&M.length>0&&M.map((e,t)=>(0,r.jsx)(x.Z,{index:t,item:e,isChat:!0,edit:C,onDeleteChange:()=>{let e=[...M];e.splice(t,1),T(e)}},t)),C&&F.length>0&&F.map((e,t)=>(0,r.jsx)(x.Z,{index:t,item:e,isChat:!0,edit:C,onDeleteChange:()=>{let e=[...F];e.splice(t,1),A(e)}},t)),C&&(0,r.jsxs)("div",{className:"p-2 border-2  border-n-3 dark:border-n-5 rounded-xl  mt-3 mr-3 relative",children:[(0,r.jsxs)("div",{className:"w-[48px] h-[48px] flex flex-col justify-center items-center",children:[(0,r.jsx)(I.Z,{className:"w-7 h-7 fill-[#7F8689] transition-colors dark:fill-n-4",name:"plus"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Upload"})]}),(0,r.jsx)("input",{className:"absolute inset-0 opacity-0 cursor-pointer file-value-clear",type:"file",onChange:e=>{z(e.target.files)},multiple:!0})]})]}),!C&&(0,r.jsx)(r.Fragment,{children:2==i?"":f}),C&&(0,r.jsx)(u.Z,{className:"w-full  bg-transparent  outline-none resize-none placeholder:text-n-4/75 dark:text-n-1 dark:placeholder:text-n-4",style:{letterSpacing:"-.01em"},maxRows:10,value:N,ref:p,onChange:e=>{k(e.target.value)},autoFocus:!0}),0!=i&&!C&&(0,r.jsx)(m,{flagged:1==i,block:2==i})]})]}),C&&(0,r.jsxs)("div",{className:"mt-3 flex justify-center items-center print-actions",children:[(0,r.jsx)("button",{className:"btn-blue btn-small",onClick:()=>{o(N,M.concat(F)),P()},children:"Save & Submit"}),(0,r.jsx)("button",{className:"btn-stroke-light btn-small shrink-0 ml-2",onClick:()=>{P(),T(E().cloneDeep(j))},children:"Cancel"})]}),(0,R.Z)({maxSize:G,maxLength:O,filesMax:U,filesMaxSize:W})]})};var T=l(83182),z=l(30399),G=l(80399);let O=e=>{let{}=e;return(0,r.jsx)("div",{className:"h-[24px] absolute",children:(0,r.jsxs)("div",{className:"flex space-x-1.5",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-n-7 animate-[loaderDots_0.6s_0s_infinite_alternate] dark:bg-n-1"}),(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-n-7 animate-[loaderDots_0.6s_0.3s_infinite_alternate] dark:bg-n-1"}),(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-n-7 animate-[loaderDots_0.6s_0.6s_infinite_alternate] dark:bg-n-1"})]})})};var U=l(23330);let W=e=>{let{content:t,toggleMarkdown:l,isMarkdown:s,mkdBtnShow:a=!0}=e,{language:{browserLanguage:i}}=(0,n.v9)(e=>e),c=()=>{l()};return(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)(w,{content:t}),a&&(0,r.jsx)(r.Fragment,{children:s?(0,r.jsx)(F,{title:"".concat((0,U.VQ)("HOME_SWITCH_PLAINTEXT",i)),onClick:c}):(0,r.jsx)(S,{title:"".concat((0,U.VQ)("HOME_SWITCH_MARKDOWN",i)),onClick:c})})]})};var P=l(28027),B=l(30076),H=l(22004),Q=l(9177),V=l(89583);let Y=e=>{let t=e.includes("youtube.com/results");if(t)return!1;let l=["youtube.com/watch","youtu.be","vimeo.com"].some(t=>e.includes(t)),r=[".mp4",".webm",".ogg",".mkv"].some(t=>e.endsWith(t));return l||r},q=e=>{let{children:t,href:l}=e;return Y(l)?(0,r.jsx)(H.Z,{url:l,config:{youtube:{playerVars:{origin:window.location.origin}}},controls:!0,width:"100%",height:"28rem",style:{margin:"20px 0"}}):(0,r.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer",style:{color:"#0082FC",textDecoration:"underline"},children:t})},K=e=>{let{node:t,inline:l,className:n="",children:s,...a}=e,i=/language-(\w+)/.exec(n||""),c="Plain Text";i&&i[1]&&(c=i[1]);let o=String(s||""),d=l?o:o.replace(/(\b[a-zA-Z_]+\b)/g,"`$&`");return l?(0,r.jsx)("code",{...a,className:n,children:d}):(0,r.jsxs)("div",{style:{position:"relative",marginTop:"20px",marginBottom:"20px",borderRadius:"8px"},className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",style:{padding:"10px",backgroundColor:"#333",marginBottom:"-0.5em"},children:[(0,r.jsx)("span",{style:{color:"#fff",fontSize:"12px"},children:c}),(0,r.jsx)(f.CopyToClipboard,{text:o,children:(0,r.jsxs)("button",{style:{color:"#fff",fontSize:"12px",display:"flex",alignItems:"center"},onClick:()=>(0,Q.Z)({content:"Copy Success",iconCheck:!0}),className:"print-hide",children:[(0,r.jsx)(V.esY,{style:{marginRight:"5px"}}),"  ","Copy code"]})})]}),(0,r.jsx)(P.Z,{style:B.Z,language:c,wrapLines:!0,showLineNumbers:!1,children:o})]})},X={code:K,a:s.memo(q),table:e=>{let{children:t}=e;return(0,r.jsx)("table",{className:"my-table-class",children:t})}};var $=l(89552);let J=e=>{let{status:t,message:l,last:c,mod_resultq:o,mod_resulta:d,pnChildren:x}=e,[u,h]=(0,s.useState)(!0),[g,p]=(0,s.useState)(""),[f,y]=(0,s.useState)([]),[N,w]=(0,s.useState)([]),k=()=>{h(!u)},[_,C]=(0,s.useState)([]),{language:{browserLanguage:S},model:{chatModelParams:Z}}=(0,n.v9)(e=>e),F=2==o||2==d,A=1==d,{content:D,loading:L,errcode:R,model:M}=l;(0,a.Z)(()=>{p(navigator.language.substring(0,2))}),(0,s.useEffect)(()=>{let e=E().cloneDeep(D),t=Array.isArray(e)?e:[];y(t);let l=Array.isArray(e)?null==e?void 0:e.filter(e=>1==e.type).map(e=>e.args.content+"\n\n"):[];console.log(l,"contentCopyText"),w(l)},[D]);let U=e=>{let{show:t,args:l,title:n}=e;return(0,r.jsxs)("div",{className:"overflow-hidden ".concat(t?"block":"hidden"," print-show w-full relative mt-4 rounded-lg"),children:[n&&(0,r.jsxs)("div",{className:"flex justify-between items-center p-[10px]",style:{backgroundColor:"#333",marginBottom:"-0.5em"},children:[(0,r.jsx)("span",{className:"text-xs text-white",children:n}),(null==l?void 0:l.content)&&(0,r.jsx)(v(),{text:null==l?void 0:l.content,onCopy:()=>{(0,j.Am)(e=>(0,r.jsx)(b.Z,{iconCheck:!0,children:(0,r.jsx)("div",{className:"ml-3 h6",children:"Content copied"})}))},children:(0,r.jsxs)("button",{className:"flex text-white items-center text-xs ",children:[(0,r.jsx)(V.esY,{style:{marginRight:"5px"}}),"  ","Copy code"]})})]}),l&&(0,r.jsx)(P.Z,{style:B.Z,language:g,wrapLines:!0,showLineNumbers:!1,customStyle:{marginBottom:0,fontSize:"13px"},children:null==l?void 0:l.content})]})},H=e=>u?(0,r.jsx)(i.D,{rehypePlugins:[G.Z],remarkPlugins:[z.Z,T.Z],components:X,children:F?"":e}):(0,r.jsx)("div",{className:"flex items-start overflow-x-auto whitespace-pre-wrap break-words flex-col mt-5",children:F?"":e}),Q=()=>{try{let e=Z.find(e=>e.model_id==M);if(e)return e}catch(e){}};return(0,r.jsxs)("div",{className:"max-w-[65rem] mb-4 md:last:mb-1 m-auto relative py-6 px-6 space-y-4 bg-n-2 rounded-[1.25rem] md:p-5  dark:bg-n-7/50 mark-down__sw",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"relative shrink-0 w-8 h-8 rounded-lg overflow-hidden	shadow-[0_0_0_0.25rem_#FEFEFE] dark:shadow-[0_0_0_0.25rem_#232627]",children:(0,r.jsx)("img",{className:"object-cover w-12 h-12",src:"".concat(Q()&&Q().icon||"/images/Bchat3.svg"),style:{objectFit:"fill",height:"100%"},alt:"Avatar"})}),Q()&&(0,r.jsx)("span",{className:"ml-3 text-gray-400 font-bold",children:Q().model_name})]}),(0,r.jsx)("div",{className:"mr-auto"}),(0,r.jsxs)("div",{className:"flex items-center print-actions  space-x-3",children:[(0,r.jsx)(W,{isMarkdown:u,toggleMarkdown:k,content:N.join("")}),x]})]}),(0,r.jsxs)("div",{className:"".concat(c&&u&&("responding"==t||"sending"==t||0==f.length)?"result-responding":"","  markdown overflow-x-auto prose ").concat(A||R?"text-orange-500":""),dir:"ar"!=S&&"fa"!=S?"":"ar"==g||"fa"==g?"rtl":"",children:[("responding"==t||"sending"==t)&&0==f.length&&c&&L&&(0,r.jsx)(O,{}),Array.isArray(f)&&f.length>0?f.map((e,l)=>{let{type:n,args:a,id:i}=e,c=_.findIndex(e=>e==a.key),o=c>-1,d=l+i;if(1==n)return(0,r.jsx)(s.Fragment,{children:H(a.content)},d);if(2==n){let e="dialogue"!=t&&void 0==f[l+1];return(0,r.jsxs)("div",{className:"flex flex-col items-start  mt-2",children:[a&&a.name&&(0,r.jsxs)("div",{className:"flex items-center text-xs rounded p-3  text-gray-900 cursor-pointer ".concat(e?"bg-green-100":"bg-white"),onClick:()=>{try{let e=[..._];o?e.splice(c,1):e.push(a.key),C(e)}catch(e){console.error(e,"err")}},children:[(0,r.jsxs)("div",{className:" relative flex items-center",children:[e?"Using":"Used",(0,r.jsx)("b",{className:"ml-1",children:a.name}),e?"...":"",e&&(0,r.jsx)("div",{className:" absolute -right-7 w-5 h-5 svg-mauto flex items-center justify-center ml-2",children:(0,r.jsx)($.default,{size:"small"})})]}),(0,r.jsx)("div",{className:"ml-10 flex items-center gap-2 transform  ".concat(o?" rotate-180 ":"rotate-0 "),children:(0,r.jsx)(I.Z,{name:"arrow-down",className:"w-4 h-4"})})]}),U({show:o,args:a,title:"REQUEST TO ".concat(null==a?void 0:a.name.toUpperCase())})]},d)}if(3==n)return(0,r.jsx)(s.Fragment,{children:U({show:o,args:a,title:"RESPONSE FROM ".concat(null==a?void 0:a.name.toUpperCase())})},d)}):"string"==typeof D?(0,r.jsx)(s.Fragment,{children:H(D)}):(0,r.jsx)(s.Fragment,{}),(0!=d||0!=o)&&(0,r.jsx)(m,{flagged:A,block:F})]})]})};var ee=s.memo(J),et=l(14328);let el=e=>{let{status:t,conv_tree:l,setConvTree:n,setLastTree:a,handleSendMessage:i}=e;return(0,r.jsx)(r.Fragment,{children:l.length>0&&function e(c,o){let d=(e,r,s)=>{if("sending"==t||"responding"==t||"prev"===s&&0===e||"next"===s&&e===c.length-1)return!1;let i=(0,et.k0)(l,r.id,s);n(i),a(i)},m=(e,l)=>(0,r.jsx)(p,{data:c,index:e,status:"sending"==t||"responding"==t,handleClickPrev:()=>d(e,l,"prev"),handleClickNext:()=>d(e,l,"next")});return(0,r.jsx)(r.Fragment,{children:c.map((l,n)=>{if(l.selected){var a,c;return(0,r.jsxs)(s.Fragment,{children:[1==l.role&&(0,r.jsx)(M,{message:l,status:t,mod_result:l.mod_result,pnChildren:m(n,l),saveMessage:(e,t)=>{i({message:e,attachments:t,parentId:null==o?void 0:o.id,save:!0})}}),2==l.role&&(0,r.jsx)(ee,{message:l,last:(null===(a=l.children)||void 0===a?void 0:a.length)==0,mod_resultq:o.mod_result,mod_resulta:l.mod_result,status:t,pnChildren:m(n,l)}),(null===(c=l.children)||void 0===c?void 0:c.length)>0&&e(l.children,l)]},l.id)}})})}(l)})};var er=el},74641:function(e,t,l){var r=l(85893),n=l(44319),s=l(91633),a=l(74806),i=l(65880),c=l(67294),o=l(45933),d=l(50888),m=l(89552),x=l(94055);let u=e=>{let{index:t,item:l,isChat:u,edit:h,onDeleteChange:g}=e,{filesList:p,setFileList:f}=(0,c.useContext)(i.p),v=!1,j="",b="";if("string"==typeof l){var y=l.split("__").slice(1).join("__");v=["jpg","jpeg","png","gif","bmp","svg"].includes(y.split(".")[1]),b=y,j=l}else{let{file:e}=l,t=e.name,r=t.split(".").pop().toLowerCase();v=["jpg","jpeg","png","gif","bmp","svg"].includes(r);let n=URL.createObjectURL(e);j=n,b=t}return(0,r.jsx)("div",{className:"p-2 border-2  border-n-3 dark:border-n-5 rounded-xl  mt-3 mr-3 ".concat("error"==l.status?" border-red-500 dark:border-red-500":""," ").concat(v?"md:mr-2":"md:w-full md:mr-0"),children:(0,r.jsxs)("div",{className:"flex items-center base1 font-semibold",children:[(0,r.jsxs)("div",{className:"relative flex items-center justify-center rounded-xl overflow-hidden ".concat(v?"":"md:w-full"),children:[(0,r.jsx)("div",{className:" relative w-[48px] h-[48px] dark:bg-n-6 rounded-xl overflow-hidden",children:v?(0,r.jsx)(s.Z,{className:"object-cover rounded-xl",src:j,alt:"Avatar",style:{width:48,height:48,cursor:"pointer"},width:48,height:48,preview:{mask:""}}):(0,r.jsx)("div",{className:"w-[48px] h-[48px] bg-n-9 flex justify-center items-center",children:(0,r.jsx)(o.Z,{className:"w-7 h-7 text-white"})})}),!u&&l.progress<100&&"uploading"==l.status&&(0,r.jsxs)("div",{className:"w-[48px] h-[48px] absolute left-0 flex justify-center items-center rounded-xl overflow-hidden",children:[(0,r.jsx)("div",{className:"mask"}),(0,r.jsx)(a.Z,{type:"circle",strokeColor:"#fff",trailColor:"#999",percent:l.progress,size:40,showInfo:!1})]}),"loading"==l.status&&(0,r.jsxs)("div",{className:"w-[48px] h-[48px] absolute left-0 flex justify-center items-center rounded-xl overflow-hidden",children:[(0,r.jsx)("div",{className:"mask"}),(0,r.jsx)(m.default,{indicator:(0,r.jsx)(d.Z,{style:{fontSize:40,color:"#fff"},spin:!0,rev:void 0})})]}),(!v||u)&&(0,r.jsxs)("div",{className:"overflow-hidden ml-2 flex-1 ",children:[(0,r.jsx)("div",{className:"truncate max-w-[11rem] md:max-w-full",title:b,children:b}),(0,r.jsx)("div",{className:"truncate text-gray-300 text-sm dark:text-gray-500",children:v?"Image":"File"})]})]}),(!u||h)&&(0,r.jsx)(x.default,{placement:"top",title:"Remove file",children:(0,r.jsx)("button",{className:"group w-8 h-8 -mr-2 rounded-full text-0",onClick:()=>{if(h)g();else{let e=[...p];e.splice(t,1),f(e)}},children:(0,r.jsx)(n.Z,{className:"w-5 h-5 fill-n-4 transition-colors group-hover:fill-accent-1 ".concat("error"==l.status?" fill-red-500 dark:fill-red-500":""),name:"trash"})})})]})})};t.Z=u}}]);